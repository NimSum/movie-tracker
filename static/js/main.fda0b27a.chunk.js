(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,a){e.exports=a.p+"static/media/film.a8ba11ab.png"},33:function(e,t,a){e.exports=a.p+"static/media/hamburger.9e0d17aa.svg"},35:function(e,t,a){e.exports=a.p+"static/media/active.4bc306eb.svg"},36:function(e,t,a){e.exports=a.p+"static/media/inactive.5cff0a49.svg"},39:function(e,t,a){e.exports=a(58)},44:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(22),s=a.n(o),i=(a(44),a(2)),c=a.n(i),l=a(4),m=a(12),u=a(13),p=a(16),f=a(14),v=a(17),h=a(3),d=a(18),b=a(7),g=function(e){return{type:"FORM_TYPE",form:e}},E=function(e,t,a,r){return{type:"CURRENT_USER",userInfo:{id:e,name:t,email:a,favorites:r}}},w=function(e){return{type:"SELECTED_MOVIE",movie:e}},N=a(32),O=a.n(N),y=a(33),j=a.n(y),k=function(e){function t(){var e,a;Object(m.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(n)))).handleClick=function(e){var t=e.target;switch("Log-in"===t.textContent?a.props.formType("login"):a.props.formType("signup"),t.textContent){case"Log-out":a.props.logOutUser(),a.props.showFavorites(!1);break;case"Favorites":a.props.showFavorites(!0);break;default:a.props.showFavorites(!1)}},a}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.currentUser.name,t=n.a.createElement("h3",{className:"user-greeting"},"Hello ".concat(e,"!"));return n.a.createElement("header",{className:"header",onClick:this.handleClick},n.a.createElement("article",{className:"logo-wrapper"},n.a.createElement("h2",{className:"icon-text"},"MT"),n.a.createElement(b.c,{to:"/",className:"home-logo"},n.a.createElement("img",{src:O.a,alt:"film with star icon",className:"film-icon"}))),n.a.createElement("nav",{className:"desktop-nav"},e&&t,n.a.createElement(b.c,{to:"/",className:"nav"},"Home"),n.a.createElement(b.c,{to:"".concat(e?"/":"/login"),className:"nav"},"".concat(e?"Favorites":"Create Account")),n.a.createElement(b.c,{to:"".concat(e?"/":"/login"),className:"nav"},"".concat(e?"Log-out":"Log-in"))),n.a.createElement("nav",{className:"mobile-nav hidden"},n.a.createElement("img",{className:"menu-icon",alt:"hamburger icon",src:j.a})))}}]),t}(r.Component),_=Object(h.b)(function(e){return{currentUser:e.currentUser}},function(e){return{formType:function(t){return e(g(t))},logOutUser:function(){return e(E())},showFavorites:function(t){return e(function(e){return{type:"SHOW_FAVORITES",isShown:e}}(t))}}})(k),x=a(11),C=function(){var e=Object(l.a)(c.a.mark(function e(t){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((a=e.sent).ok){e.next=5;break}throw Error("Failed to fetch movies");case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),F=a(35),T=a.n(F),S=a(36),I=a.n(S),U=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(p.a)(this,Object(f.a)(t).call(this))).showMoreInfo=function(){var t=e.props.card;e.props.showMovieInfo(t)},e.toggleFavorite=function(){var t=e.props.card,a=t.movie_id,r=t.title,n=t.poster_path,o=t.release_date,s=t.vote_average,i=t.overview,c={movie_id:a,user_id:e.props.userId,title:r,poster_path:n,release_date:o,vote_average:s,overview:i};e.props.userId?(e.props.updateFavorites(c),e.setState({loginPrompt:!1})):e.setState({loginPrompt:!e.state.loginPrompt})},e.state={cardHover:!1,loginPrompt:!1},e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.card;return n.a.createElement("article",{key:e.movie_id,className:"movie-card"},n.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500/".concat(e.poster_path),alt:"Promotional movie poster for ".concat(e.title),className:"poster-img"}),n.a.createElement("div",{className:"card-hover"},n.a.createElement("h4",{className:"card-hover-heading"},e.title),n.a.createElement(b.b,{to:"/movies/".concat(e.movie_id)},n.a.createElement("button",{onClick:this.showMoreInfo,className:"more-info-btn btn"},"More ",n.a.createElement("br",null)," Info")),n.a.createElement("button",{className:"favorite-btn btn",onClick:this.toggleFavorite},e.favorite?n.a.createElement("img",{src:T.a,alt:"Star icon for favorited movie",className:"active-star star"}):n.a.createElement("img",{src:I.a,alt:"Star icon",className:"inactive-star star"})),this.state.loginPrompt?n.a.createElement("p",{className:"login-prompt prompt"},"Please login to Favorite this card"):n.a.createElement("p",{className:"prompt-placeholder prompt"},"X")))}}]),t}(r.Component),P=Object(h.b)(function(e){return{userId:e.currentUser.id,userFavorites:e.currentUser.favorites||[]}},function(e){return{showMovieInfo:function(t){return e(w(t))},fetchInfo:function(t){return e(function(e){return function(){var t=Object(l.a)(c.a.mark(function t(a){var r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C(e);case 3:r=t.sent,a(w(r)),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error("Problem getting movie info :(");case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()}(t))},updateFavorites:function(t){return e({type:"UPDATE_FAVORITES",favorite:t})}}})(U),M=Object(h.b)(function(e){return{movies:e.movies,favorites:e.currentUser.favorites||[],showFavorites:e.showFavorites}})(function(e){var t=e.favorites.map(function(e){return e.movie_id}),a=e.movies.map(function(e){return Object(x.a)({},e,{favorite:!!t.includes(e.movie_id)})}),r=(e.showFavorites?a.filter(function(e){return e.favorite}):a).map(function(e){return n.a.createElement(P,{key:e.movie_id,card:e})});return n.a.createElement("section",{className:"movies-section"},r,0===e.favorites.length&&e.showFavorites&&n.a.createElement("h2",null,"No Favorites Yet"))}),A=a(55),R=Object(h.b)(function(e){return{posters:e.movies.map(function(e){return"https://image.tmdb.org/t/p/w500/".concat(e.poster_path)}),showFavs:e.showFavorites}})(function(e){var t=Array(256).fill(""),a=0,r=t.map(function(t){return 19===a?a=0:a++,n.a.createElement("div",{key:A(),className:"tile"},n.a.createElement("img",{src:e.posters[a],className:"tile",alt:""}))});return n.a.createElement("section",{className:"banner-section"},n.a.createElement("h1",{className:"banner-heading"},e.showFavs?"Favorites":"MovieTracker"),n.a.createElement("div",{className:"movie-tiles"},r))}),D=function(){return n.a.createElement("section",{className:"home-section"},n.a.createElement(R,null),n.a.createElement(M,null))},L=a(19),V=function(){var e=Object(l.a)(c.a.mark(function e(t,a){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Failed to post user data");case 5:return e.abrupt("return",r.json());case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),H=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(p.a)(this,Object(f.a)(t).call(this))).formTypeHandler=function(){var t=e.state,a=t.email,r=t.password,n=t.userName,o="login"===e.props.formType?{email:a,password:r}:{email:a,password:r,name:n};return{url:"login"===e.props.formType?"http://localhost:3000/api/users":"http://localhost:3000/api/users/new",userInfo:o,email:a,userName:n}},e.fetchUserFavorites=function(){var e=Object(l.a)(c.a.mark(function e(t){var a,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="http://localhost:3000/api/users/".concat(t,"/favorites"),e.next=3,C(a);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),e.submitUserData=Object(l.a)(c.a.mark(function t(){var a,r,n,o,s,i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.formTypeHandler(),r=a.url,n=a.userInfo,o=a.email,s=a.userName,t.prev=1,t.next=4,V(r,n);case 4:if(i=t.sent,"login"!==e.props.formType){t.next=18;break}return t.t0=e.props,t.t1=x.a,t.t2={},t.t3=i.data,t.next=12,e.fetchUserFavorites(i.data.id);case 12:t.t4=t.sent,t.t5={favorites:t.t4},t.t6=(0,t.t1)(t.t2,t.t3,t.t5),t.t0.signInUser.call(t.t0,t.t6),t.next=19;break;case 18:e.props.signInUser({id:i.id,email:o,name:s,favorites:[]});case 19:return t.next=21,e.setState({error:!1});case 21:t.next=26;break;case 23:t.prev=23,t.t7=t.catch(1),e.setState({error:!0});case 26:case"end":return t.stop()}},t,null,[[1,23]])})),e.handleChange=function(t){var a,r=t.target;e.setState((a={},Object(L.a)(a,r.name,r.value),Object(L.a)(a,"passwordMismatch",!1),Object(L.a)(a,"error",!0),a))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,r=(a.email,a.confirmPassword),n=a.password;a.userName;e.props.formType;var o="signup"===e.props.formType&&n!==r;e.setState({passwordMismatch:o})},e.state={password:"",email:"",confirmPassword:"",userName:"",error:!0,passwordMismatch:!1},e}return Object(v.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.formType,a=e.currentUser,r=e.changeForm;if(a.name)return n.a.createElement(d.a,{to:"/"});var o=n.a.createElement("div",{className:"signup-form-inputs"},n.a.createElement("label",{htmlFor:"userName",className:"sign-up input-label"},"Username"),n.a.createElement("input",{onChange:this.handleChange,name:"userName",type:"text",id:"userName",className:"sign-up form-input",autoComplete:"name"}),n.a.createElement("label",{htmlFor:"email-input",className:"sign-up input-label"},"E-mail"),n.a.createElement("input",{type:"email",id:"email-input",className:"sign-up form-input",onChange:this.handleChange,name:"email",autoComplete:"email"}),n.a.createElement("label",{htmlFor:"password-input",className:"sign-up input-label"},"Password"),n.a.createElement("input",{type:"password",id:"password-input",className:"sign-up form-input",onChange:this.handleChange,name:"password",autoComplete:"new-password"}),n.a.createElement("label",{htmlFor:"confirm-password-input",className:"sign-up input-label"},"Confirm Password"),n.a.createElement("input",{onChange:this.handleChange,name:"confirmPassword",type:"password",id:"confirm-password-input",className:"sign-up form-input",autoComplete:"new-password"})),s=n.a.createElement("div",{className:"sign-in-inputs"},n.a.createElement("label",{htmlFor:"email-input",className:"email-input-label input-label"},"E-mail"),n.a.createElement("input",{type:"email",id:"email-input",className:"form-input",onChange:this.handleChange,name:"email",autoComplete:"username"}),n.a.createElement("label",{htmlFor:"password-input",className:"password-input-label  input-label"},"Password"),n.a.createElement("input",{type:"password",id:"password-input",className:"form-input",onChange:this.handleChange,name:"password",autoComplete:"current-password"}));n.a.createElement("span",{className:"signup-link",onClick:function(){return r("signup")}},"Create Account");return n.a.createElement("main",{className:"login-page"},n.a.createElement("h2",{className:"form-heading"},"login"===t?"LOGIN":"SIGN-UP"),n.a.createElement("form",{className:"login-form",onSubmit:this.handleSubmit},n.a.createElement("fieldset",{className:"login-fieldset"},"login"===t?s:o,this.state.passwordMismatch&&n.a.createElement("p",null,"Passwords do not match"),this.state.error&&n.a.createElement("p",{className:"login-error"},"This functionality is disabled, the accounts API is only accessible through local server :("),n.a.createElement("input",{id:"form-submit-btn",type:"submit",value:"Submit"}))))}}]),t}(r.Component),J=Object(h.b)(function(e){return{formType:e.formType,currentUser:e.currentUser}},function(e){return{signInUser:function(t){var a=t.id,r=t.name,n=t.email,o=t.favorites;return e(E(a,r,n,o))},changeForm:function(t){return e(g(t))}}})(H),W=function(e){return e.map(function(e){var t=e.id,a=e.backdrop_path;return{movie_id:t,title:e.title,poster_path:e.poster_path,release_date:e.release_date,vote_average:e.vote_average,overview:e.overview,backdrop_path:a}})},Y=Object(h.b)(function(e){return{movie:e.selectedMovie}})(function(e){var t=e.movie,a=t.title,r=t.backdrop_path,o=t.overview,s=t.poster_path,i=t.release_date,c=t.vote_average;return n.a.createElement("section",{className:"movie-page-container"},n.a.createElement("article",{className:"movie-banner-wrapper"},n.a.createElement("img",{src:"https://image.tmdb.org/t/p/original/".concat(r),alt:"Promotional poster from ".concat(a),className:"movie-banner-img"})),n.a.createElement("article",{className:"poster-container"},n.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500/".concat(s),alt:"Promotional poster from ".concat(a),className:"movie-poster-img"})),n.a.createElement("article",{className:"movie-text-container"},n.a.createElement("h2",{className:"title-heading"},a),n.a.createElement("h3",{className:"date-heading"},i),n.a.createElement("h4",{className:"rating-heading"},"Rating: ",c),n.a.createElement("p",{className:"overview-text"},o)))}),G=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(c.a.mark(function e(){var t,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://gist.githubusercontent.com/NimSum/10413ecf56ebb80fd5cc1c82ba3392f5/raw/6fba221c12d065f673cc5b066621d0c4984edfa1/mock-movie-tracker-api",e.prev=1,e.next=4,C("https://gist.githubusercontent.com/NimSum/10413ecf56ebb80fd5cc1c82ba3392f5/raw/6fba221c12d065f673cc5b066621d0c4984edfa1/mock-movie-tracker-api");case 4:return t=e.sent,e.next=7,W(t.results);case 7:return a=e.sent,e.next=10,this.props.addMovies(a);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}},e,this,[[1,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(_,null),n.a.createElement(d.b,{exact:!0,path:"/",component:D}),n.a.createElement(d.b,{exact:!0,path:"/favorites",component:D}),n.a.createElement(d.b,{exact:!0,path:"/login",component:J}),n.a.createElement(d.b,{exact:!0,path:"/movies/:id",component:Y}))}}]),t}(r.Component),B=Object(h.b)(function(e){return{movies:e.movies}},function(e){return{addMovies:function(t){return e(function(e){return{type:"ADD_MOVIES",movies:e}}(t))}}})(G),X=a(28),q=a(15),z=function(){var e=Object(l.a)(c.a.mark(function e(t,a){var r,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="http://localhost:3000/api/users/".concat(t,"/favorites/").concat(a),e.next=3,fetch(r,{method:"DELETE",headers:{"Content-Type":"application/json"}});case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Something went wrong");case 6:return e.abrupt("return",n.json());case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),K={},Q=Object(q.combineReducers)({movies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MOVIES":return[].concat(Object(X.a)(e),Object(X.a)(t.movies));default:return e}},formType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FORM_TYPE":return t.form;default:return e}},currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CURRENT_USER":return Object(x.a)({},e,t.userInfo);case"UPDATE_FAVORITES":var a=t.favorite.movie_id;return e.favorites.some(function(e){return e.movie_id===a})?(z(e.id,a),Object(x.a)({},e,{favorites:e.favorites.filter(function(e){return e.movie_id!==a})})):(V("http://localhost:3000/api/users/favorites/new",t.favorite),Object(x.a)({},e,{favorites:e.favorites.concat(t.favorite)}));default:return e}},selectedMovie:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECTED_MOVIE":return Object(x.a)({},e,t.movie);default:return e}},showFavorites:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SHOW_FAVORITES"===t.type?t.isShown:e}}),Z=a(37),$=a(38),ee=Object(q.createStore)(Q,Object(Z.composeWithDevTools)(Object(q.applyMiddleware)($.a)));s.a.render(n.a.createElement(h.a,{store:ee},n.a.createElement(b.a,{basename:"/"},n.a.createElement(B,null))),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.fda0b27a.chunk.js.map